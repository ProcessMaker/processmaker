{"version":3,"file":"static/chunks/pages/widget-41b73a00dac482f9.js","mappings":"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","sources":["webpack://_N_E/?7626","webpack://_N_E/./src/pages/widget.tsx","webpack://_N_E/<anon>"],"sourcesContent":["\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/widget\",\n      function () {\n        return require(\"private-next-pages/widget.tsx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/widget\"])\n      });\n    }\n  ","import React from \"react\";\nimport dynamic from \"next/dynamic\";\nimport Head from \"next/head\";\nimport { useRouter } from \"next/router\";\nimport { ThemeProvider } from \"styled-components\";\nimport toast from \"react-hot-toast\";\nimport { darkTheme, lightTheme } from \"src/constants/theme\";\nimport { Tools } from \"src/containers/Editor/LiveEditor/Tools\";\nimport { EditorWrapper } from \"src/layout/EditorWrapper\";\nimport useFile from \"src/store/useFile\";\nimport useGraph from \"src/store/useGraph\";\n\ninterface EmbedMessage {\n  data: {\n    json?: string;\n    options?: any;\n  };\n}\n\nconst Graph = dynamic(() => import(\"src/components/Graph\").then(c => c.Graph), {\n  ssr: false,\n});\n\nconst WidgetPage = () => {\n  const { query, push, isReady } = useRouter();\n  const [theme, setTheme] = React.useState(\"dark\");\n  const checkEditorSession = useFile(state => state.checkEditorSession);\n  const setContents = useFile(state => state.setContents);\n  const setDirection = useGraph(state => state.setDirection);\n  const clearGraph = useGraph(state => state.clearGraph);\n\n  React.useEffect(() => {\n    if (isReady) {\n      if (typeof query?.json === \"string\") checkEditorSession(query.json, true);\n      else clearGraph();\n      window.parent.postMessage(window.frameElement?.getAttribute(\"id\"), \"*\");\n    }\n  }, [clearGraph, checkEditorSession, isReady, push, query.json, query.partner]);\n\n  React.useEffect(() => {\n    const handler = (event: EmbedMessage) => {\n      try {\n        if (!event.data?.json) return;\n        if (event.data?.options?.theme === \"light\" || event.data?.options?.theme === \"dark\") {\n          setTheme(event.data.options.theme);\n        }\n\n        setContents({ contents: event.data.json, hasChanges: false });\n        setDirection(event.data.options?.direction);\n      } catch (error) {\n        console.error(error);\n        toast.error(\"Invalid JSON!\");\n      }\n    };\n\n    window.addEventListener(\"message\", handler);\n    return () => window.removeEventListener(\"message\", handler);\n  }, [setContents, setDirection, theme]);\n\n  return (\n    <EditorWrapper>\n      <Head>\n        <meta name=\"robots\" content=\"noindex,nofollow\" />\n      </Head>\n      <ThemeProvider theme={theme === \"dark\" ? darkTheme : lightTheme}>\n        <Tools isWidget />\n        <Graph isWidget />\n      </ThemeProvider>\n    </EditorWrapper>\n  );\n};\n\nexport default WidgetPage;\n"],"names":["window","__NEXT_P","push","__webpack_require__","Graph","dynamic","Promise","all","e","then","bind","c","ssr","__webpack_exports__","query","isReady","useRouter","theme","setTheme","React","checkEditorSession","useFile","state","setContents","setDirection","useGraph","clearGraph","json","parent","postMessage","frameElement","getAttribute","partner","handler","event","data","options","contents","hasChanges","direction","error","console","toast","addEventListener","removeEventListener","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","jsxs","EditorWrapper","jsx","Head","meta","name","content","ThemeProvider","darkTheme","lightTheme","Tools","isWidget"],"sourceRoot":""}